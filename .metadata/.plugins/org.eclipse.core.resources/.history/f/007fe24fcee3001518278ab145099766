/*
 * adc.c
 *
 *  Created on: Mar 5, 2016
 *      Author: Steffon Brigman
 */

#include "msp432.h"
#include "stdint.h"
#include "driverlib.h"
#include "functions.h"
#include "macros.h"

void Init_Adc(){
    /* Configure ADC10
     * Sampling time, S&H=96, ADC14 on
     * Use sampling timer, 14-bit conversion results
     */
    ADC10CTL0 = ADC10SHT0_5 | ADC10SHP |  ADC10SSEL_1 | ADC10ON ;
    ADC10CTL1 = ADC10RES_3;

    ADC10MCTL0 |= ADC14INCH_15;             // A15 ADC input select; Vref=AVCC
    ADC10IER0 |= ADC10IE0;                  // Enable ADC conv complete interrupt

    NVIC_ISER0 |= INT_ADC10_BIT;         // Enable ADC interrupt in NVIC module

    __enable_interrupt();                   // Enable NVIC global/master interrupt
    SCB_SCR &= ~SCB_SCR_SLEEPONEXIT;        // Wake up on exit from ISR
}

