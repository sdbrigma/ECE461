/*
 * interrupts.c
 *
 *  Created on: Mar 5, 2016
 *      Author: Steffon Brigman
 */

#include "msp432.h"
#include "stdint.h"
#include "driverlib.h"
#include "functions.h"
#include "macros.h"

volatile uint32_t debounce_value;
void port5IsrHandler(){ // SW1
	//uint32_t debounce = SysTick_getValue();
	if(debounce_value > 4){
		SysTick_disableInterrupt();
		burglar_alarm();
		debounce_value = 0;
		Init_SysTick(DEBOUNCE);
	}
}

void port3IsrHandler(){//SW2
	//uint32_t debounce = SysTick_getValue();
	if(SysTick_getValue() == DEBOUNCE){
		if(alarm_state){
			alarm_system_state(FALSE);
			alarm_state = 0;
		}
		else{
			alarm_system_state(TRUE);
			alarm_state = 1;
		}
		debounce_value = 0;
	}
}

void adc14IsrHandler(){
			if((ADC14->MEM[10] >= BURGLAR) && alarm_state){
				//burglar_alarm();
			}
		ADC14_clearInterruptFlag(ADC_INT10);
}
